zookeeper:
        image: 'jplock/zookeeper:3.4.6'
        ports:
          - '2181:2181'

elasticsearch:
        image: 'elasticsearch:2.4.1'
        ports:
          - "9200:9200"
          - "9300:9300"

dynamodb:
        image: rajatvig/dynalite-alpine
        ports:
          - '8000:8000'
##
datastore:
        image: 'mastodonc/kixi.datastore:latest'
        #use volumes_from until we upgrade and get depends_on
        ports:
          - "8080:8080"
        volumes_from:
          - "elasticsearch"
          - "dynamodb"
        links:
          - zookeeper:zookeeper
          - elasticsearch:elasticsearch
          - dynamodb:dynamodb
        environment:
          - CONFIG_PROFILE=local
          - ZOOKEEPER=zookeeper
          - ELASTICSEARCH=elasticsearch
          - DYNAMODB=http://dynamodb:8000
          - COMMAND_STREAM=witan-dev-command
          - EVENT_STREAM=witan-dev-event
        env_file:
          - aws-variables.env

heimdall:
        image: 'mastodonc/kixi.heimdall-dev:latest'
        ports:
          - "3002:3002"
        volumes_from:
          - "dynamodb"
        links:
          - zookeeper:zookeeper
          - dynamodb:dynamodb
        environment:
          - ZOOKEEPER=zookeeper
        env_file:
          - aws-variables.env
